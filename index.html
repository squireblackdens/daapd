<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="description" content="forked-daapd : This is a much updated version of the original forked-daapd 0.19, a Linux/FreeBSD DAAP (iTunes) media server with support for AirPlay devices, Apple Remote (and compatibles), MPD, Spotify, mp3 streaming and internet radio.">

    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">

    <title>forked-daapd</title>
  </head>

  <body>

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
          <a id="forkme_banner" href="https://github.com/ejurgensen/forked-daapd">View on GitHub</a>

          <h1 id="project_title">forked-daapd</h1>
          <h2 id="project_tagline">This is a much updated version of the original forked-daapd 0.19, a Linux/FreeBSD DAAP (iTunes) media server with support for AirPlay devices, Apple Remote (and compatibles), MPD, Spotify, mp3 streaming and internet radio.</h2>

            <section id="downloads">
              <a class="zip_download_link" href="https://github.com/ejurgensen/forked-daapd/zipball/master">Download this project as a .zip file</a>
              <a class="tar_download_link" href="https://github.com/ejurgensen/forked-daapd/tarball/master">Download this project as a tar.gz file</a>
            </section>
        </header>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">
        <h1>
<a id="forked-daapd" class="anchor" href="#forked-daapd" aria-hidden="true"><span class="octicon octicon-link"></span></a>forked-daapd</h1>

<p>forked-daapd is a Linux/FreeBSD DAAP (iTunes), MPD (Music Player Daemon) and
RSP (Roku) media server.</p>

<p>It has support for AirPlay devices/speakers, Apple Remote (and compatibles),
MPD clients, network streaming, internet radio, Spotify and LastFM. It does not
support AirPlay video.</p>

<p>DAAP stands for Digital Audio Access Protocol, and is the protocol used
by iTunes and friends to share/stream media libraries over the network.</p>

<p>RSP is Roku's own media sharing protocol. Roku are the makers of the
SoundBridge devices. See <a href="http://www.roku.com">http://www.roku.com</a>.</p>

<p>The source for this version of forked-daapd can be found here:</p>

<p><a href="https://github.com/ejurgensen/forked-daapd.git">https://github.com/ejurgensen/forked-daapd.git</a></p>

<p>The original (now unmaintained) source can be found here:</p>

<p><a href="http://git.debian.org/?p=users/jblache/forked-daapd.git">http://git.debian.org/?p=users/jblache/forked-daapd.git</a></p>

<p>forked-daapd is a complete rewrite of mt-daapd (Firefly Media Server).</p>

<h2>
<a id="contents-of-this-readme" class="anchor" href="#contents-of-this-readme" aria-hidden="true"><span class="octicon octicon-link"></span></a>Contents of this README</h2>

<ul>
<li><a href="#getting-started">Getting started</a></li>
<li><a href="#supported-clients">Supported clients</a></li>
<li><a href="#using-remote">Using Remote</a></li>
<li><a href="#airplay-devicesspeakers">AirPlay devices/speakers</a></li>
<li><a href="#local-audio-output">Local audio output</a></li>
<li><a href="#MP3-network-streaming-(streaming-to-iOS)">MP3 network streaming (streaming to iOS)</a></li>
<li><a href="#supported-formats">Supported formats</a></li>
<li><a href="#streaming-mpeg4">Streaming MPEG4</a></li>
<li><a href="#playlists-and-internet-radio">Playlists and internet radio</a></li>
<li><a href="#artwork">Artwork</a></li>
<li><a href="#library">Library</a></li>
<li><a href="#command-line-and-web-interface">Command line and web interface</a></li>
<li><a href="#spotify">Spotify</a></li>
<li><a href="#lastfm">LastFM</a></li>
<li><a href="#mpd-clients">MPD clients</a></li>
</ul>

<h2>
<a id="getting-started" class="anchor" href="#getting-started" aria-hidden="true"><span class="octicon octicon-link"></span></a>Getting started</h2>

<p>After installation (see <a href="INSTALL">INSTALL</a>) do the following:</p>

<ol>
<li>Edit the configuration file (usually <code>/etc/forked-daapd.conf</code>) to suit your
needs</li>
<li>Start or restart the server (usually <code>/etc/init.d/forked-daapd restart</code>)</li>
<li>Wait for the library scan to complete. You can follow the progress with
<code>tail -f /var/log/forked-daapd.log</code>
</li>
<li>If you are going to use a remote app, pair it following the procedure
described below</li>
</ol>

<h2>
<a id="supported-clients" class="anchor" href="#supported-clients" aria-hidden="true"><span class="octicon octicon-link"></span></a>Supported clients</h2>

<p>forked-daapd supports these kinds of clients:</p>

<ul>
<li>DAAP clients, like iTunes or Rhythmbox</li>
<li>Remote clients, like Apple Remote or compatibles for Android/Windows Phone</li>
<li>AirPlay devices, like AirPort Express, Shairport and various AirPlay speakers</li>
<li>MPD clients, like mpc (see <a href="#mpd-clients">mpd-clients</a>)</li>
<li>MP3 network stream clients, like VLC and almost any other music player</li>
<li>RSP clients, like Roku Soundbridge</li>
</ul>

<p>Like iTunes, you can control forked-daapd with Remote and stream your music
to AirPlay devices.</p>

<p>A single forked-daapd instance can handle several clients concurrently,
regardless of the protocol.</p>

<p>Here is a list of working and non-working DAAP and Remote clients. The list is
probably obsolete when you read it :-)</p>

<table>
<thead>
<tr>
<th>Client</th>
<th>Developer</th>
<th>Type</th>
<th>Platform</th>
<th>Working (vers.)</th>
</tr>
</thead>
<tbody>
<tr>
<td>iTunes</td>
<td>Apple</td>
<td>DAAP</td>
<td>Win, OSX</td>
<td>Yes (12.3)</td>
</tr>
<tr>
<td>Rhythmbox</td>
<td>Gnome</td>
<td>DAAP</td>
<td>Linux</td>
<td>Yes</td>
</tr>
<tr>
<td>WinAmp DAAPClient</td>
<td>WardFamily</td>
<td>DAAP</td>
<td>WinAmp</td>
<td>Yes</td>
</tr>
<tr>
<td>Amarok w/DAAP plugin</td>
<td>KDE</td>
<td>DAAP</td>
<td>Linux/Win</td>
<td>Yes (2.8.0)</td>
</tr>
<tr>
<td>Banshee</td>
<td></td>
<td>DAAP</td>
<td>Linux/Win/OSX</td>
<td>No (2.6.2)</td>
</tr>
<tr>
<td>jtunes4</td>
<td></td>
<td>DAAP</td>
<td>Java</td>
<td>No</td>
</tr>
<tr>
<td>Firefly Client</td>
<td></td>
<td>(DAAP)</td>
<td>Java</td>
<td>No</td>
</tr>
<tr>
<td>Remote</td>
<td>Apple</td>
<td>Remote</td>
<td>iOS</td>
<td>Yes (4.2.2)</td>
</tr>
<tr>
<td>Retune</td>
<td>SquallyDoc</td>
<td>Remote</td>
<td>Android</td>
<td>Yes (3.5.23)</td>
</tr>
<tr>
<td>TunesRemote+</td>
<td>Melloware</td>
<td>Remote</td>
<td>Android</td>
<td>Yes (2.5.3)</td>
</tr>
<tr>
<td>Remote for iTunes</td>
<td>Hyperfine</td>
<td>Remote</td>
<td>Android</td>
<td>Yes</td>
</tr>
<tr>
<td>Remote for Windows Phone</td>
<td>Komodex</td>
<td>Remote</td>
<td>Windows Phone</td>
<td>Yes (2.2.1.0)</td>
</tr>
<tr>
<td>TunesRemote SE</td>
<td></td>
<td>Remote</td>
<td>Java</td>
<td>Yes (r108)</td>
</tr>
</tbody>
</table>

<h2>
<a id="using-remote" class="anchor" href="#using-remote" aria-hidden="true"><span class="octicon octicon-link"></span></a>Using Remote</h2>

<p>If you plan to use Remote with forked-daapd, read the following sections
carefully. The pairing process described is similar for other controllers, but
some do not require pairing.</p>

<h3>
<a id="pairing-with-remote-on-ipodiphone" class="anchor" href="#pairing-with-remote-on-ipodiphone" aria-hidden="true"><span class="octicon octicon-link"></span></a>Pairing with Remote on iPod/iPhone</h3>

<p>forked-daapd can be paired with Apple's Remote application for iPod/iPhone/iPad;
this is how the pairing process works:</p>

<ol>
<li>Start forked-daapd</li>
<li>Start Remote, go to Settings, Add Library</li>
<li>
<p>Look in the log file for a message saying:</p>

<pre><code>"Discovered remote 'Foobar' (id 71624..."
</code></pre>

<p>This tells you the name of your device (Foobar in this example).</p>

<p>If you cannot find this message, it means that forked-daapd did not receive
a mDNS announcement from your Remote. You have a network issue and mDNS
doesn't work properly on your network.</p>
</li>
<li>
<p>Prepare a text file with a filename ending with .remote; the filename
doesn't matter, only the .remote ending does. This file must contain
two lines: the first line is the name of your iPod/iPhone/iPad, the second
is the 4-digit pairing code displayed by Remote.</p>

<p>If your iPod/iPhone/iPad is named "Foobar" and Remote gives you the pairing
code 5387, the file content must be:</p>

<pre><code>Foobar
5387 
</code></pre>
</li>
<li><p>Move this file somewhere in your library</p></li>
</ol>

<p>At this point, you should be done with the pairing process and Remote should
display the name of your forked-daapd library. You should delete the .remote
file once the pairing process is done.</p>

<p>If Remote doesn't display the name of your forked-daapd library at this point,
the pairing process failed. Here are some common reasons:</p>

<h4>
<a id="your-library-is-a-network-mount" class="anchor" href="#your-library-is-a-network-mount" aria-hidden="true"><span class="octicon octicon-link"></span></a>Your library is a network mount</h4>

<p>forked-daapd does not get notified about new files on network mounts, so the
.remote file was not detected. You will see no log file messages about the file.
Solution: Set two library paths in the config, and add the .remote file to the
local path. See <a href="#libraries-on-network-mounts">Libraries on network mounts</a>.</p>

<h4>
<a id="you-did-not-enter-the-correct-name-or-pairing-code" class="anchor" href="#you-did-not-enter-the-correct-name-or-pairing-code" aria-hidden="true"><span class="octicon octicon-link"></span></a>You did not enter the correct name or pairing code</h4>

<p>You will see an error in the log about pairing failure with a HTTP response code
that is <em>not</em> 0.
Solution: Copy-paste the name to be sure to get specials characters right. You
can also try the pairinghelper script located in the scripts-folder of the
source.</p>

<h4>
<a id="no-response-from-remote-possibly-a-network-issue" class="anchor" href="#no-response-from-remote-possibly-a-network-issue" aria-hidden="true"><span class="octicon octicon-link"></span></a>No response from Remote, possibly a network issue</h4>

<p>If you see an error in the log with either:</p>

<ul>
<li>a HTTP response code that is 0</li>
<li>"Empty pairing request callback"
it means that forked-daapd could not establish a connection to Remote. This 
might be a network issue.
Solution: Sometimes it resolves the issue if you force Remote to quit, restart
it and do the pairing proces again. Another trick is to establish some other
connection (eg SSH) from the iPod/iPhone/iPad to the host.</li>
</ul>

<p>Otherwise try using avahi-browse for troubleshooting:</p>

<ul>
<li>in a terminal, run <code>avahi-browse -r -k _touch-remote._tcp</code>
</li>
<li>start Remote, goto Settings, Add Library</li>
<li>after a couple seconds at most, you should get something similar to this:</li>
</ul>

<pre><code>+ ath0 IPv4 59eff13ea2f98dbbef6c162f9df71b784a3ef9a3      _touch-remote._tcp   local
= ath0 IPv4 59eff13ea2f98dbbef6c162f9df71b784a3ef9a3      _touch-remote._tcp   local
   hostname = [Foobar.local]
   address = [192.168.1.1]
   port = [49160]
   txt = ["DvTy=iPod touch" "RemN=Remote" "txtvers=1" "RemV=10000" "Pair=FAEA410630AEC05E" "DvNm=Foobar"]
</code></pre>

<p>Hit Ctrl-C to terminate avahi-browse.</p>

<p>The name of your iPod/iPhone/iPad is the value of the DvNm field above. In this
example, the correct value is Foobar. To check for network issues you can try to
connect to address and port with telnet.</p>

<h3>
<a id="selecting-output-devices" class="anchor" href="#selecting-output-devices" aria-hidden="true"><span class="octicon octicon-link"></span></a>Selecting output devices</h3>

<p>Remote gets a list of output devices from the server; this list includes any
and all devices on the network we know of that advertise AirPlay: AirPort
Express, Apple TV, ... It also includes the local audio output, that is, the
sound card on the server (even if there is no soundcard).</p>

<p>By default, if no output is selected when playback starts, the local output
device will be used. If that fails it will try to stream to any available
AirPlay speaker.</p>

<p>forked-daapd remembers your selection and the individual volume for each
output device; selected devices will be automatically re-selected at the next
server startup, provided they appear in the 5 minutes following the startup
and no playback has occured yet.</p>

<h2>
<a id="airplay-devicesspeakers" class="anchor" href="#airplay-devicesspeakers" aria-hidden="true"><span class="octicon octicon-link"></span></a>AirPlay devices/speakers</h2>

<p>forked-daapd will discover the AirPlay devices available on your network. For
devices that are password-protected, the device's AirPlay name and password
must be given in the configuration file. See the sample configuration file
for the syntax.</p>

<h2>
<a id="local-audio-output" class="anchor" href="#local-audio-output" aria-hidden="true"><span class="octicon octicon-link"></span></a>Local audio output</h2>

<p>The audio section of the configuration file supports 2 parameters for the local
audio device:</p>

<ul>
<li>nickname: this is the name that will be used in the speakers list in Remote</li>
<li>card: this is the name/device string (ALSA) or device node (OSS4) to be used
as the local audio device. Defaults to "default" for ALSA and "/dev/dsp" for
OSS4.</li>
</ul>

<h2>
<a id="mp3-network-streaming-streaming-to-ios" class="anchor" href="#mp3-network-streaming-streaming-to-ios" aria-hidden="true"><span class="octicon octicon-link"></span></a>MP3 network streaming (streaming to iOS)</h2>

<p>You can listen to audio being played by forked-daapd by opening this network
stream address in pretty much any music player:</p>

<p>http://[your hostname/ip address]:3689/stream.mp3</p>

<p>This is currently the only way of listening to your audio on iOS devices, since
Apple does not allow AirPlay receiver apps, and because Apple Home Sharing
cannot be supported by forked-daapd. So what you can do instead is install a
music player app like VLC, connect to the stream and control playback with
Remote. You can also use MPoD in "On the go"-mode, where control and playback is
integrated in one app (see (#mpd-clients)).</p>

<p>Note that MP3 encoding must be supported by ffmpeg/libav for this to work. If
it is not available you will see a message in the log file. In Debian/Ubuntu you
get MP3 encoding support by installing the package "libavcodec-extra".</p>

<h2>
<a id="supported-formats" class="anchor" href="#supported-formats" aria-hidden="true"><span class="octicon octicon-link"></span></a>Supported formats</h2>

<p>forked-daapd should support pretty much all media formats. It relies on libav
(or ffmpeg) to extract metadata and decode the files on the fly when the client
doesn't support the format.</p>

<p>Formats are attributed a code, so any new format will need to be explicitely
added. Currently supported:</p>

<ul>
<li>MPEG4: mp4a, mp4v</li>
<li>AAC: alac</li>
<li>MP3 (and friends): mpeg</li>
<li>FLAC: flac</li>
<li>OGG VORBIS: ogg</li>
<li>Musepack: mpc</li>
<li>WMA: wma (WMA Pro), wmal (WMA Lossless), wmav (WMA video)</li>
<li>AIFF: aif</li>
<li>WAV: wav</li>
</ul>

<h2>
<a id="streaming-mpeg4" class="anchor" href="#streaming-mpeg4" aria-hidden="true"><span class="octicon octicon-link"></span></a>Streaming MPEG4</h2>

<p>Depending on the client application, you may need to optimize your MPEG4 files
for streaming. Stream-optimized MPEG4 files have their metadata at the beginning
of the file, whereas non-optimized files have them at the end.</p>

<p>Not all clients need this; if you're having trouble playing your MPEG4 files,
this is the most probable cause. iTunes, in particular, doesn't handle files
that aren't optimized, though FrontRow does.</p>

<p>Files produced by iTunes are always optimized by default. Files produced by
FAAC and a lot of other encoders are not, though some encoders have an option
for that.</p>

<p>The mp4creator tool from the mpeg4ip suite can be used to optimize MPEG4 files,
with the -optimize option:</p>

<pre><code>  $ mp4creator -optimize foo.m4a
</code></pre>

<p>Don't forget to make a backup copy of your file, just in case.</p>

<p>Note that not all tag/metadata editors know about stream optimization and will
happily write the metadata back at the end of the file after you've modified
them. Watch out for that.</p>

<h2>
<a id="playlists-and-internet-radio" class="anchor" href="#playlists-and-internet-radio" aria-hidden="true"><span class="octicon octicon-link"></span></a>Playlists and internet radio</h2>

<p>forked-daapd supports M3U and PLS playlists. Just drop your playlist somewhere
in your library with an .m3u or .pls extension and it will pick it up.</p>

<p>If the playlist contains an http URL it will be added as an internet radio
station, and the URL will be probed for Shoutcast (ICY) metadata. If the radio
station provides artwork, forked-daapd will download it during playback and send
it to any remotes or AirPlay devices requesting it.</p>

<p>Instead of downloading M3U's from your radio stations, you can also make an
empty M3U file and in it insert links to the M3U's of your radio stations.</p>

<p>Support for iTunes Music Library XML format is available as a compile-time
option. By default, metadata from our parsers is preferred over what's in
the iTunes DB; use itunes_overrides = true if you prefer iTunes' metadata.</p>

<p>forked-daapd has support for smart playlists. How to create a smart playlist is
documented in <a href="README_SMARTPL.md">README_SMARTPL.md</a>.</p>

<h2>
<a id="artwork" class="anchor" href="#artwork" aria-hidden="true"><span class="octicon octicon-link"></span></a>Artwork</h2>

<p>forked-daapd has support for artwork.</p>

<p>Embedded artwork is only supported if your version of forked-daapd was built
with libav 9+ or ffmpeg 0.11+.</p>

<p>Your artwork must be in PNG or JPEG format, dimensions do not matter;
forked-daapd scales down (never up) the artwork on-the-fly to match the
constraints given by the client. Note, however, that the bigger the picture,
the more time and resources it takes to perform the scaling operation.</p>

<p>The naming convention for album and artist artwork (group artwork) is as 
follows:</p>

<ul>
<li>if a file {artwork,cover,Folder}.{png,jpg} is found in one of the directories
containing files that are part of the group, it is used as the artwork. The
first file found is used, ordering is not guaranteed;</li>
<li>failing that, if [directory name].{png,jpg} is found in one of the
directories containing files that are part of the group, it is used as the
artwork. The first file found is used, ordering is not guaranteed;</li>
<li>failing that, individual files are examined and the first file found 
with an embedded artwork is used. Here again, ordering is not guaranteed.</li>
</ul>

<p>Artwork for individual songs is not supported, artwork for individual songs is 
found by resolving to the group artwork.</p>

<p>{artwork,cover,Folder} are the default, you can add other base names in the
configuration file.</p>

<p>You can use symlinks for the artwork files; the artwork is not scanned/indexed.</p>

<p>forked-daapd caches artwork in a separate cache file. The default path is 
<code>/var/cache/forked-daapd/cache.db</code> and can be configured in the configuration 
file. The cache.db file can be deleted without losing the library and pairing 
informations.</p>

<h2>
<a id="library" class="anchor" href="#library" aria-hidden="true"><span class="octicon octicon-link"></span></a>Library</h2>

<p>The library is scanned in bulk mode at startup, but the server will be available
even while this scan is in progress. You can follow the progress of the scan in
the log file.</p>

<p>Of course, if files have gone missing while the server was not running a request
for these files will produce an error until the scan has completed and the file
is no longer offered. Similarly, new files added while the server was not
running won't be offered until they've been scanned.</p>

<p>Changes to the library are reflected in real time after the initial scan. The
directories are monitored for changes and rescanned on the fly. Note that if you
have your library on a network mount then real time updating may not work. Read
below about what to do in that case.</p>

<p>If you change any of the directory settings in the library section of the
configuration file a rescan is required before the new setting will take effect.
Currently, this will not be done automatically, so you need to trigger the
rescan as described below.</p>

<h3>
<a id="symlinks-and-pipes" class="anchor" href="#symlinks-and-pipes" aria-hidden="true"><span class="octicon octicon-link"></span></a>Symlinks and pipes</h3>

<p>Symlinks are supported and dereferenced. This does interact in tricky ways
with the above monitoring and rescanning, so you've been warned. Changes to
symlinks themselves won't be taken into account, or not the way you'd expect.</p>

<p>If you use symlinks, do not move around the target of the symlink. Avoid
linking files, as files themselves aren't monitored for changes individually,
so changes won't be noticed unless the file happens to be in a directory that
is monitored.</p>

<p>Bottom line: symlinks are for directories only.</p>

<p>Pipes made with mkfifo are also supported. This feature can be useful if you
have a program that can stream PCM16 audio to a pipe. Forked-daapd can then
forward the audio to one or more AirPlay speakers.</p>

<p>Pipes have no metadata, so they will be added with "Unknown artist" and "Unknown
album". The name of the pipe will be used as the track title.</p>

<h3>
<a id="libraries-on-network-mounts" class="anchor" href="#libraries-on-network-mounts" aria-hidden="true"><span class="octicon octicon-link"></span></a>Libraries on network mounts</h3>

<p>Most network filesharing protocols do not offer notifications when the library
is changed. So that means forked-daapd cannot update its database in real time.
Instead you can schedule a cron job to update the database.</p>

<p>The first step in doing this is to add two entries to the 'directories'
configuration item in forked-daapd.conf:</p>

<pre><code>  directories = { "/some/local/dir", "/your/network/mount/library" }
</code></pre>

<p>Now you can make a cron job that runs this command:</p>

<pre><code>  touch /some/local/dir/trigger.init-rescan
</code></pre>

<p>When forked-daapd detects a file with filename ending .init-rescan it will
perform a bulk scan similar to the startup scan.</p>

<h3>
<a id="troubleshooting-library-issues" class="anchor" href="#troubleshooting-library-issues" aria-hidden="true"><span class="octicon octicon-link"></span></a>Troubleshooting library issues</h3>

<p>If you place a file with the filename ending .full-rescan in your library,
you can trigger a full rescan of your library. This will clear all music and
playlists from forked-daapd's database and initiate a fresh bulk scan. Pairing
and speaker information will be kept. Only use this for troubleshooting, it is
not necessary during normal operation.</p>

<h2>
<a id="command-line-and-web-interface" class="anchor" href="#command-line-and-web-interface" aria-hidden="true"><span class="octicon octicon-link"></span></a>Command line and web interface</h2>

<p>forked-daapd is meant to be used with the clients mentioned above, so it does
not have a command line interface nor does it have a web interface. You can,
however, to some extent control forked-daapd with <a href="#mpd-clients">MPD clients</a> or 
from the command line by issuing DAAP/DACP commands with a program like curl.
Here is an example of how to do that.</p>

<p>Say you have a playlist with a radio station, and you want to make a script that
starts playback of that station:</p>

<ol>
<li>Run 'sqlite3 [your forked-daapd db]'. Use 'select id,title from files' to get
the id of the radio station, and use 'select id,title from playlists' to get
the id of the playlist.</li>
<li>Convert the two ids to hex.</li>
<li>Put the following lines in the script with the relevant ids inserted (also
observe that you must use a session-id &lt; 100, and that you must login and
logout):</li>
</ol>

<pre><code>curl "http://localhost:3689/login?pairing-guid=0x1&amp;request-session-id=50"
curl "http://localhost:3689/ctrl-int/1/playspec?database-spec='dmap.persistentid:0x1'&amp;container-spec='dmap.persistentid:0x[PLAYLIST-ID]'&amp;container-item-spec='dmap.containeritemid:0x[FILE ID]'&amp;session-id=50"
curl "http://localhost:3689/logout?session-id=50"
</code></pre>

<h2>
<a id="spotify" class="anchor" href="#spotify" aria-hidden="true"><span class="octicon octicon-link"></span></a>Spotify</h2>

<p>forked-daapd has <em>some</em> support for Spotify. It must be compiled with the
<code>--enable-spotify option</code> (see <a href="INSTALL">INSTALL</a>). You must have also have
libspotify installed, otherwise the Spotify integration will not be available.
You can get libspotify here:</p>

<ul>
<li>Original (binary) tar.gz, see <a href="https://developer.spotify.com">https://developer.spotify.com</a>
</li>
<li>Debian package (libspotify-dev), see <a href="https://apt.mopidy.com">https://apt.mopidy.com</a>
</li>
</ul>

<p>You must also have a Spotify premium account. If you normally log into Spotify
with your Facebook account you must first go to Spotify's web site where you can
get the Spotify username and password that matches your account. With
forked-daapd you cannot login into Spotify with your Facebook username/password.</p>

<p>The procedure for logging in to Spotify is very much like the Remote pairing
procedure. You must prepare a file, which should have the ending ".spotify".
The file must have two lines: The first is your Spotify user name, and the
second is your password. Move the file to your forked-daapd library.
Forked-daapd will then log in and add all the music in your Spotify playlists
to its database.</p>

<p>Spotify will automatically notify forked-daapd about playlist updates, so you
should not need to restart forked-daapd to syncronize with Spotify.</p>

<p>For safety you should delete the ".spotify" file after first login. Forked-daapd
will not store your password, but will still be able to log you in automatically
afterwards, because libspotify saves a login token. You can configure the
location of your Spotify user data in the configuration file.</p>

<p>Limitations: You will only be able to play tracks from your Spotify playlists,
so you can't search and listen to music from the rest of the Spotify catalogue.
You will not be able to do any playlist management through forked-daapd - use
a Spotify client for that. You also can only listen to your music by letting
forked-daapd do the playback - so that means you can't stream from forked-daapd
to iTunes.</p>

<h2>
<a id="lastfm" class="anchor" href="#lastfm" aria-hidden="true"><span class="octicon octicon-link"></span></a>LastFM</h2>

<p>If forked-daapd was built with LastFM scrobbling enabled (see the <a href="INSTALL">INSTALL</a> file)
you can have it scrobble the music you listen to. To set up scrobbling you must
create a text file with the file name ending ".lastfm". The file must have two
lines: The first is your LastFM user name, and the second is your password. Move
the file to your forked-daapd library. Forked-daapd will then log in and get a
permanent session key.</p>

<p>You should delete the .lastfm file immediately after completing the first login.
For safety, forked-daapd will not store your LastFM username/password, only the
session key. The session key does not expire.</p>

<p>To stop scrobbling from forked-daapd, add an empty ".lastfm" file to your
library.</p>

<h2>
<a id="mpd-clients" class="anchor" href="#mpd-clients" aria-hidden="true"><span class="octicon octicon-link"></span></a>MPD clients</h2>

<p>If forked-daapd was build with support for the <a href="http://musicpd.org/">Music Player Deamon</a> 
protocol (see the <a href="INSTALL">INSTALL</a> file) you can - to some extent - use clients for MPD 
to control forked-daapd. 
By default forked-daapd listens on port 6600 for MPD clients. You can change this by
adding a section "mpd" to the forked-daapd.conf file:</p>

<pre><code># MPD configuration (only have effect if MPD enabled - see README/INSTALL)
mpd {
    port = 8800
}
</code></pre>

<p>Currently only a subset of the commands offered by MPD (see <a href="http://www.musicpd.org/doc/protocol/">MPD protocol documentation</a>) 
are supported by forked-daapd.</p>

<p>Due to some differences between forked-daapd and MPD not all commands will act the same way they would running MPD:</p>

<ul>
<li>consume, crossfade, mixrampdb, mixrampdelay and replaygain will have no effect</li>
<li>single, repeat: unlike MPD forked-daapd does not support setting single and repeat separately 
on/off, instead repeat off, repeat all and repeat single are supported. Thus setting single on 
will result in repeat single, repeat on results in repeat all.</li>
</ul>

<p>Following table shows what is working for a selection of MPD clients:</p>

<table>
<thead>
<tr>
<th>Client</th>
<th>Type</th>
<th>Status</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="http://www.musicpd.org/clients/mpc/">mpc</a></td>
<td>CLI</td>
<td>Working commands: mpc, add, crop, current, del (ranges are not yet supported), play, next, prev (behaves like cdprev), pause, toggle, cdprev, seek, clear, outputs, enable, disable, playlist, ls, load, volume, repeat, random, single, search, find, list, update (initiates an init-rescan, the path argument is not supported)</td>
</tr>
<tr>
<td><a href="http://www.ympd.org/">ympd</a></td>
<td>Web</td>
<td>Everything except "add stream" should work</td>
</tr>
</tbody>
</table>
      </section>
    </div>

    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        <p class="copyright">forked-daapd maintained by <a href="https://github.com/ejurgensen">ejurgensen</a></p>
        <p>Published with <a href="https://pages.github.com">GitHub Pages</a></p>
      </footer>
    </div>

              <script type="text/javascript">
            var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
            document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
          </script>
          <script type="text/javascript">
            try {
              var pageTracker = _gat._getTracker("UA-68930202-1");
            pageTracker._trackPageview();
            } catch(err) {}
          </script>


  </body>
</html>
